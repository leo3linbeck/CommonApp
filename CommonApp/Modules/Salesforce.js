/*	In order to make the helloWorld() function available client-side, you have to add a reference to the 'Salesforce' module in the GUI Designer.	The helloWorld() function can be executed from your JS file as follows:	alert(Salesforce.helloWorld());		For more information, refer to http://doc.wakanda.org/Wakanda0.Beta/help/Title/en/page1516.html*/exports.loadData = function loadData () {	var xhr, headersObj = {}, resultTxt, resultObj;	var r;		try {		var xhr = new XMLHttpRequest();		var api_key = require(getFolder('path') + 'APIKeys/Salesforce.js')				var getString = 'https://login.salesforce.com/services/oauth2/authorize?response_type=code'		getString += '&client_id=' + encodeURIComponent(api_key.consumer_key());		getString += '&redirect_uri=' + encodeURIComponent('https://commonapp.cloudapp.net/oauth2/callback');		xhr.onreadystatechange = function() { // event handler			var state = this.readyState;			if (state !== 4) { // while the status event is not Done we continue				return;			}			var result = this.responseText;  //get the contents of the response			var headers = this.getAllResponseHeaders(); //get the headers of the response			var headersArray = headers.split('\n'); // split and format the headers string in an array			headersArray.forEach(function(header, index) {				var name, indexSeparator, value;					if (header.indexOf('HTTP/1.1') === 0) { // this is not a header but a status		  					return; // filter it				}		  				indexSeparator = header.indexOf(':'); 				name = header.substr(0,indexSeparator);				if (name === "") {					return;				}				value = header.substr(indexSeparator + 1).trim(); // clean up the header attribute				headersObj[name] = value; // fills an object with the headers			});			if (headersObj['Content-Type'] && headersObj['Content-Type'].indexOf('json') !== -1) {  					 // JSON response, parse it as objects				resultObj = JSON.parse(result);			}			else { // not JSON, return text				resultTxt = result;			}		}; 		xhr.open('GET', getString, false); // to connect to a Web site synchronously		xhr.send(); // send the request	} catch (e) {		r = null;	}	if (xhr.status === 302) {		debugger;		r = headerObj['LOCATION'];	}	else {		r = null;	}		return r;};