L3.familyAddressLookup = function familyAddressLookup(param) {	var xhr, getString, v, c, families;	if (param.debug) {		debugger;	}		v = L3.addressesGetInfo(param);			if (v) {		families = ds.Family.query('uspsDeliveryPoint = :1', v.delivery_point_barcode);				c = families.find('name == :1',L3.NEW_FAMILY_TEXT);		if (c === null) {			c = ds.Family.createEntity();			c.name = L3.NEW_FAMILY_TEXT;			c.uspsDeliveryPoint = v.delivery_point_barcode;			families.add(c);		}		c.homeStreet1 = param.street1;		c.homeStreet2 = param.street2;		c.homeCity = param.city;		c.homeState = v.components.state_abbreviation;		c.homeZipCode = v.components.zipcode + '-' + v.components.plus4_code;		c.uspsLine1 = v.delivery_line_1;		c.uspsLine2 = v.last_line;		c.mapCoords = v.metadata.latitude + ',' + v.metadata.longitude;		c.save();				return families;	}	else {		return null;	}}L3.familyGetNearbySchools = function familyGetNearbySchools(param) {	var a, f, h;	if (param.debug) {		debugger;	}			f = ds.Family(param.familyID);	h = f.mapCoords.split(',');	ds.School.all().forEach(		function (e, i) {			var c, d, v, s;//			if (e.mapCoords === '') {//				v = L3.addressesGetInfo(param);//				e.mapCoords = v.metadata.latitude + ',' + v.metadata.longitude;//				e.save();//			}			if (e.mapCoords) {				d = L3.getDistanceFromLatLonInMiles(h, e.mapCoords.split(','));				s = ds.FamilySchool.find('family.ID == :1 AND school.ID == :2', f.ID, e.ID);				if (!s) {					s = ds.FamilySchool.createEntity();					s.family = f;					s.school = e;				}				s.distance = d;				s.save();			}		}	);		return ds.FamilySchool.query('family.ID == :1 AND distance <= :2', f.ID, param.distance).orderBy('distance');}