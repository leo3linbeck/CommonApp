include('Javascript/addresses.js');L3.personGetFullName = function getFullName() {	return this.firstName + (this.middleName ? ' ' + this.middleName : '') + (this.lastName ? ' ' + this.lastName : '') + (this.suffix ? ' ' + this.suffix : '')}L3.personGetAgeToday = function personGetAgeToday() {	var bday = this.birthdate;	if (bday) {		var today = new Date;		var age =  today.getFullYear() - bday.getFullYear();		if (today.getMonth() < bday.getMonth()) {			age -= 1;		}		else {			if (today.getMonth() === bday.getMonth() && today.getDay() < bday.getDay()) {				age -= 1;			}		}		return age;	}	else {		return null;	}}L3.personConjureReverse = function personConjureReverse(param, attr) {	var f, p;		if (param.debug) {		debugger;	}		f = ds.Family(param.familyID)[attr];	if (f.ID){		p = ds.Person(f.ID);	}	else {		p = ds.Person.createEntity();		param.load.forEach(			function(e, i) {				p[e.key] = e.value;			}		);		p.save();		f[attr] = p;		f.save();	}		return p;}L3.personConjureFather = function personConjureFather(param) {	return L3.personConjureReverse(param, 'father');}L3.personConjureMother = function personConjureMother(param) {	return L3.personConjureReverse(param, 'mother');}L3.personConjureGuardian = function personConjureGuardian(param) {	return L3.personConjureReverse(param, 'guardian');}L3.personAddressLookup = function personAddressLookup(a) {	var param = a[0];	var loc = param.location.toLowerCase(), p, v;	if (param.debug) {		debugger;	}		if (param.ID) {		p = ds.Person(param.ID);				param.oneLineAddress = false;		v = L3.addressesGetInfo(param);					if (v) {			p[loc + 'USPSDeliveryPoint'] = v.delivery_point_barcode;			p[loc + 'Street1'] = L3.addressesStreet1String(v);			p[loc + 'Street2'] = L3.addressesStreet2String(v);			p[loc + 'City'] = v.components.city_name;			p[loc + 'State'] = v.components.state_abbreviation;			p[loc + 'ZipCode'] = v.components.zipcode + '-' + v.components.plus4_code;			p[loc + 'USPSLine1'] = v.delivery_line_1;			p[loc + 'USPSLine2'] = v.last_line;			p[loc + 'MapCoords'] = v.metadata.latitude + ',' + v.metadata.longitude;			p.save();		}		else {			p[loc + 'USPSDeliveryPoint'] = null;			p[loc + 'USPSLine1'] = null;			p[loc + 'USPSLine2'] = null;			p[loc + 'MapCoords'] = null;			p.save();			return ( { success: false } );		}	}	else {		return ( { success: false } );	}		return ( { success: true, result: p } );}