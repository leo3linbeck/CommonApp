function oauth2_callback(request, response) {	var xhr, headersObj = {}, resultTxt, resultObj;	var r;	var requestCode = request.urlQuery.substr(5)	var api_key = require(getFolder('path') + 'APIKeys/Salesforce.js')		var postURI = 'https://login.salesforce.com/services/oauth2/token';	var postString = 'code=' + encodeURIComponent(requestCode);	postString += '&grant_type=authorization_code';	postString += '&client_id=' + encodeURIComponent(api_key.consumer_key());	postString += '&client_secret=' + encodeURIComponent(api_key.consumer_secret());	postString += '&redirect_uri=' + encodeURIComponent('https://commonapp.cloudapp.net/oauth2/callback');	debugger;	try {		var xhr = new XMLHttpRequest();		xhr.onreadystatechange = function() { // event handler			var state = this.readyState;			if (state !== 4) { // while the status event is not Done we continue				return;			}			var result = this.responseText;  //get the contents of the response			var headers = this.getAllResponseHeaders(); //get the headers of the response			var headersArray = headers.split('\n'); // split and format the headers string in an array			headersArray.forEach(function(header, index) {				var name, indexSeparator, value;					if (header.indexOf('HTTP/1.1') === 0) { // this is not a header but a status		  					return; // filter it				}		  				indexSeparator = header.indexOf(':'); 				name = header.substr(0,indexSeparator);				if (name === "") {					return;				}				value = header.substr(indexSeparator + 1).trim(); // clean up the header attribute				headersObj[name] = value; // fills an object with the headers			});			if (headersObj['Content-Type'] && headersObj['Content-Type'].indexOf('json') !== -1) {  					 // JSON response, parse it as objects				resultObj = JSON.parse(result);			}			else { // not JSON, return text				resultTxt = result;			}		}; 		xhr.open('POST', postURI, false); // to connect to a Web site synchronously		xhr.send(postString); // send the request	} catch (e) {		r = null;	}	debugger;	if (xhr.status === 200) {		r = resultTxt ? resultTxt : JSON.stringify(resultObj);	}	else {		r = null;	}		return r;}